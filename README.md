# TinyString
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges.sh from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges.sh from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->


TinyString is a lightweight Go library that provides comprehensive string manipulation, type conversion, formatting, and error handling with a fluid API, specifically designed for small devices and web applications using TinyGo as the target compiler.

## Key Features

- üöÄ **Fluid and chainable API** - Easy to use and readable operations
- ÔøΩ **Complete string toolkit** - Transformations, conversions, formatting, and error handling
- üßµ **Concurrency safe** - Thread-safe operations for concurrent environments
- üì¶ **Zero dependencies** - No `fmt`, `strings`, `strconv`, or `errors` imports
- üéØ **TinyGo optimized** - Manual implementations for minimal binary size
- üåê **WebAssembly-first** - Designed for modern web deployment
- üîÑ **Universal type support** - Works with strings, numbers, booleans, and slices
- ‚ö° **Performance focused** - Predictable allocations and custom optimizations

## Why TinyString?

**Go's WebAssembly potential is incredible**, but traditional applications face a critical challenge: **massive binary sizes** that make web deployment impractical.

### The Problem
Every Go project needs string manipulation, type conversion, and error handling - but importing standard library packages (`fmt`, `strings`, `strconv`, `errors`) creates significant binary bloat that hurts:

- üåê **Web app performance** - Slow loading times and poor user experience
- ÔøΩ **Edge deployment** - Resource constraints on small devices  
- üöÄ **Distribution efficiency** - Large binaries for simple operations

### The Solution
TinyString replaces multiple standard library packages with **lightweight, manual implementations** that deliver:

- üèÜ **Up to smaller binaries** - Dramatic size reduction for WebAssembly
- ‚úÖ **Full TinyGo compatibility** - No compilation issues or warnings
- üéØ **Predictable performance** - No hidden allocations or overhead
- üîß **Familiar API** - Drop-in replacement for standard library functions


## Installation

```bash
go get github.com/cdvelop/tinystring
```

## Usage

```go
import "github.com/cdvelop/tinystring"

// Quick start - Basic conversion and transformation
text := tinystring.Convert("H√≥la M√∫ndo").RemoveTilde().ToLower().String()
// out: "hola mundo"

// Working with different data types
numText := tinystring.Convert(42).String()     // out: "42"
boolText := tinystring.Convert(true).String()  // out: "true"

// Memory-efficient approach using string pointers
original := "√âl M√∫rcielago R√°pido"
tinystring.Convert(&original).RemoveTilde().CamelCaseLower().Apply()
// original is now: "elMurcielagoRapido"
```

## üìö Standard Library Equivalents

### üî§ strings Package

Replace common `strings` package functions with TinyString equivalents:

| Go Standard | TinyString Equivalent |
|-------------|----------------------|
| `strings.ToLower()` | `Convert(s).ToLower().String()` |
| `strings.ToUpper()` | `Convert(s).ToUpper().String()` |
| `strings.Contains()` | `Contains(s, substr)` |
| `strings.Replace()` | `Convert(s).Replace(old, new).String()` |
| `strings.Split()` | `Split(s, sep)` |
| `strings.Join()` | `Convert(slice).Join(sep).String()` |
| `strings.TrimSpace()` | `Convert(s).Trim().String()` |
| `strings.TrimPrefix()` | `Convert(s).TrimPrefix(prefix).String()` |
| `strings.TrimSuffix()` | `Convert(s).TrimSuffix(suffix).String()` |
| `strings.Repeat()` | `Convert(s).Repeat(n).String()` |

#### String Transformations

```go
// Case conversions
tinystring.Convert("HELLO").ToLower().String()              // out: "hello"
tinystring.Convert("world").ToUpper().String()              // out: "WORLD"
tinystring.Convert("hello world").Capitalize().String()     // out: "Hello World"

// Advanced case styles
tinystring.Convert("hello world").CamelCaseLower().String()   // out: "helloWorld"
tinystring.Convert("hello world").CamelCaseUpper().String()   // out: "HelloWorld"
tinystring.Convert("hello world").ToSnakeCaseLower().String() // out: "hello_world"
tinystring.Convert("hello world").ToSnakeCaseUpper().String() // out: "HELLO_WORLD"
```

#### String Search & Operations

```go
// Search and count
found := tinystring.Contains("hello world", "world")              // out: true
count := tinystring.CountOccurrences("abracadabra", "abra")       // out: 2

// Replace operations
tinystring.Convert("hello world").Replace("world", "Go").String() // out: "hello Go"
tinystring.Convert("test 123 test").Replace(123, 456).String()    // out: "test 456 test"
```

#### String Splitting & Joining

```go
// Split strings
parts := tinystring.Split("apple,banana,cherry", ",")    
// out: []string{"apple", "banana", "cherry"}

parts := tinystring.Split("hello\tworld\nnew")  // Handles whitespace
// out: []string{"hello", "world", "new"}

// Join slices
tinystring.Convert([]string{"Hello", "World"}).Join().String()    // out: "Hello World"
tinystring.Convert([]string{"a", "b", "c"}).Join("-").String()    // out: "a-b-c"
```

#### String Trimming & Cleaning

```go
// Trim operations
tinystring.Convert("  hello  ").Trim().String()                    // out: "hello"
tinystring.Convert("prefix-data").TrimPrefix("prefix-").String()    // out: "data"
tinystring.Convert("file.txt").TrimSuffix(".txt").String()          // out: "file"

// Repeat strings
tinystring.Convert("Go").Repeat(3).String()                        // out: "GoGoGo"
```

### üî¢ strconv Package

Replace `strconv` package functions for type conversions:

| Go Standard | TinyString Equivalent |
|-------------|----------------------|
| `strconv.Itoa()` | `Convert(i).String()` |
| `strconv.Atoi()` | `Convert(s).ToInt()` |
| `strconv.ParseFloat()` | `Convert(s).ToFloat()` |
| `strconv.ParseBool()` | `Convert(s).ToBool()` |
| `strconv.FormatFloat()` | `Convert(f).RoundDecimals(n).String()` |
| `strconv.Quote()` | `Convert(s).Quote().String()` |

#### Type Conversions

```go
// String to numbers
result, err := tinystring.Convert("123").ToInt()        // out: 123, nil
result, err := tinystring.Convert("456").ToUint()       // out: 456, nil  
result, err := tinystring.Convert("3.14").ToFloat()     // out: 3.14, nil

// Numbers to string
tinystring.Convert(42).String()      // out: "42"
tinystring.Convert(3.14159).String() // out: "3.14159"

// Boolean conversions
result, err := tinystring.Convert("true").ToBool()  // out: true, nil
result, err := tinystring.Convert(42).ToBool()      // out: true, nil (non-zero = true)
result, err := tinystring.Convert(0).ToBool()       // out: false, nil

// String quoting
tinystring.Convert("hello").Quote().String()                    // out: "\"hello\""
tinystring.Convert("say \"hello\"").Quote().String()           // out: "\"say \\\"hello\\\"\""
```

#### Number Formatting

```go
// Decimal rounding
tinystring.Convert(3.154).RoundDecimals(2).String()           // out: "3.16" (ceiling)
tinystring.Convert(3.154).RoundDecimals(2).Down().String()    // out: "3.15" (floor)

// Number formatting with thousands separator
tinystring.Convert(2189009.00).FormatNumber().String()        // out: "2.189.009"
```

### üñ®Ô∏è fmt Package

Replace `fmt` package functions for formatting:

| Go Standard | TinyString Equivalent |
|-------------|----------------------|
| `fmt.Sprintf()` | `Format(format, args...)` |
| `fmt.Sprint()` | `Convert(v).String()` |

#### String Formatting

```go
// Printf-style formatting
result := tinystring.Format("Hello %s, you have %d messages", "John", 5)
// out: "Hello John, you have 5 messages"

// Multiple format specifiers
result := tinystring.Format("Number: %d, Float: %.2f, Bool: %v", 42, 3.14159, true)
// out: "Number: 42, Float: 3.14, Bool: true"

// Advanced formatting (hex, binary, octal)
result := tinystring.Format("Hex: %x, Binary: %b, Octal: %o", 255, 10, 8)
// out: "Hex: ff, Binary: 1010, Octal: 10"
```

### ‚ùå errors Package

Replace `errors` package functions for error handling:

| Go Standard | TinyString Equivalent |
|-------------|----------------------|
| `errors.New()` | `Err(message)` |
| `fmt.Errorf()` | `Errorf(format, args...)` |

#### Error Creation

```go
// Simple error creation
err := tinystring.Err("invalid input").Error()
// out: "invalid input"

// Multiple error messages
err := tinystring.Err("invalid format", "expected number").Error()
// out: "invalid format expected number"

// Formatted errors (like fmt.Errorf)
err := tinystring.Errorf("invalid value: %s at position %d", "abc", 5).Error()
// out: "invalid value: abc at position 5"

// Error with validation
result, err := tinystring.Convert("invalid").ToInt()
if err != nil {
    // Handle conversion error
}
```

## üöÄ TinyString Exclusive Features

Features not available in Go's standard library:

### üåç Unicode & Localization

```go
// Remove accents and diacritics
tinystring.Convert("caf√© na√Øve r√©sum√©").RemoveTilde().String()  // out: "cafe naive resume"
tinystring.Convert("√ëo√±o ni√±o").RemoveTilde().String()          // out: "Nono nino"
```

### ‚úÇÔ∏è Smart Truncation

```go
// Basic truncation with ellipsis
tinystring.Convert("Hello, World!").Truncate(10).String()       // out: "Hello, ..."

// Name truncation for UI display
tinystring.Convert("Jeronimo Dominguez").TruncateName(3, 15).String()
// out: "Jer. Dominguez"

// Advanced name handling
tinystring.Convert("Juan Carlos Rodriguez").TruncateName(3, 20).String()
// out: "Jua. Car. Rodriguez"
```

### üîß Advanced Utilities

```go
// Key-value parsing
value, err := tinystring.ParseKeyValue("user:admin")            // out: "admin", nil
value, err := tinystring.ParseKeyValue("count=42", "=")         // out: "42", nil

// Snake case with custom separators
tinystring.Convert("hello world").ToSnakeCaseLower("-").String() // out: "hello-world"
tinystring.Convert("hello world").ToSnakeCaseUpper("_").String() // out: "HELLO_WORLD"
```

## üí° Performance Tips

### Memory Optimization

```go
// ‚úÖ Efficient: Modify original string directly
original := "√âl M√∫rcielago R√°pido"
tinystring.Convert(&original).RemoveTilde().ToLower().Apply()
// original is now modified in-place

// ‚ùå Less efficient: Creates new string
original := "√âl M√∫rcielago R√°pido"  
result := tinystring.Convert(original).RemoveTilde().ToLower().String()
```

### Chaining Operations

```go
// Combine multiple operations efficiently
result := tinystring.Convert("  H√ìLA M√öNDO  ")
    .Trim()
    .RemoveTilde()
    .ToLower()
    .Replace(" ", "_")
    .String()
// out: "hola_mundo"
```

## üîÑ Output Methods: String() vs Apply()

Choose between two approaches for finalizing operations:

```go
// ‚úÖ String() - Returns result, keeps original unchanged
originalText := "√âl M√∫rcielago R√°pido"
result := tinystring.Convert(&originalText).RemoveTilde().ToLower().String()
// result: "el murcielago rapido"
// originalText: "√âl M√∫rcielago R√°pido" (unchanged)

// ‚úÖ Apply() - Modifies original string directly (memory efficient)
originalText := "√âl M√∫rcielago R√°pido"
tinystring.Convert(&originalText).RemoveTilde().ToLower().Apply()
// originalText: "el murcielago rapido" (modified in-place)
```


## Binary Size Comparison

[Standard Library Example](benchmark/bench-binary-size/standard-lib/main.go) | [TinyString Example](benchmark/bench-binary-size/tinystring-lib/main.go)

<!-- This table is automatically generated from build-and-measure.sh -->
*Last updated: 2025-06-16 13:50:58*

| Build Type | Parameters | Standard Library<br/>`go build` | TinyString<br/>`tinygo build` | Size Reduction | Performance |
|------------|------------|------------------|------------|----------------|-------------|
| üñ•Ô∏è **Default Native** | `-ldflags="-s -w"` | 1.3 MB | 986.0 KB | **-327.5 KB** | ‚úÖ **24.9%** |
| üåê **Default WASM** | `(default -opt=z)` | 580.8 KB | 206.7 KB | **-374.2 KB** | ‚úÖ **64.4%** |
| üåê **Ultra WASM** | `-no-debug -panic=trap -scheduler=none -gc=leaking -target wasm` | 141.3 KB | 22.9 KB | **-118.4 KB** | üèÜ **83.8%** |
| üåê **Speed WASM** | `-opt=2 -target wasm` | 827.0 KB | 253.0 KB | **-574.0 KB** | ‚úÖ **69.4%** |
| üåê **Debug WASM** | `-opt=0 -target wasm` | 1.8 MB | 650.6 KB | **-1.2 MB** | ‚úÖ **64.5%** |

### üéØ Performance Summary

- üèÜ **Peak Reduction: 83.8%** (Best optimization)
- ‚úÖ **Average WebAssembly Reduction: 70.5%**
- ‚úÖ **Average Native Reduction: 24.9%**
- üì¶ **Total Size Savings: 2.5 MB across all builds**

#### Performance Legend
- ‚ùå Poor (<5% reduction)
- ‚ûñ Fair (5-15% reduction)
- ‚úÖ Good (15-70% reduction)
- üèÜ Outstanding (>70% reduction)


## Memory Usage Comparison

[Standard Library Example](benchmark/bench-memory-alloc/standard) | [TinyString Example](benchmark/bench-memory-alloc/tinystring)

<!-- This table is automatically generated from memory-benchmark.sh -->
*Last updated: 2025-06-16 13:51:16*

Performance benchmarks comparing memory allocation patterns between standard Go library and TinyString:

| üß™ **Benchmark Category** | üìö **Library** | üíæ **Memory/Op** | üî¢ **Allocs/Op** | ‚è±Ô∏è **Time/Op** | üìà **Memory Trend** | üéØ **Alloc Trend** | üèÜ **Performance** |
|----------------------------|----------------|-------------------|-------------------|-----------------|---------------------|---------------------|--------------------|
| üìù **String Processing** | üìä Standard | `1.2 KB` | `48` | `3.1Œºs` | - | - | - |
| | üöÄ TinyString | `2.8 KB` | `96` | `12.7Œºs` | ‚ùå **136.1% more** | ‚ùå **100.0% more** | ‚ùå **Poor** |
| üî¢ **Number Processing** | üìä Standard | `912 B` | `42` | `2.4Œºs` | - | - | - |
| | üöÄ TinyString | `496 B` | `32` | `2.6Œºs` | üèÜ **45.6% less** | üèÜ **23.8% less** | üèÜ **Excellent** |
| üîÑ **Mixed Operations** | üìä Standard | `512 B` | `26` | `1.7Œºs` | - | - | - |
| | üöÄ TinyString | `846 B` | `36` | `4.1Œºs` | ‚ùå **65.2% more** | ‚ùå **38.5% more** | ‚ùå **Poor** |

### üéØ Performance Summary

- üíæ **Memory Efficiency**: ‚ùå **Poor** (Significant overhead) (51.9% average change)
- üî¢ **Allocation Efficiency**: ‚ùå **Poor** (Excessive allocations) (38.2% average change)
- üìä **Benchmarks Analyzed**: 3 categories
- üéØ **Optimization Focus**: Binary size reduction vs runtime efficiency

### ‚öñÔ∏è Trade-offs Analysis

The benchmarks reveal important trade-offs between **binary size** and **runtime performance**:

#### üì¶ **Binary Size Benefits** ‚úÖ
- üèÜ **16-84% smaller** compiled binaries
- üåê **Superior WebAssembly** compression ratios
- üöÄ **Faster deployment** and distribution
- üíæ **Lower storage** requirements

#### üß† **Runtime Memory Considerations** ‚ö†Ô∏è
- üìà **Higher allocation overhead** during execution
- üóëÔ∏è **Increased GC pressure** due to allocation patterns
- ‚ö° **Trade-off optimizes** for distribution size over runtime efficiency
- üîÑ **Different optimization strategy** than standard library

#### üéØ **Optimization Recommendations**
| üéØ **Use Case** | üí° **Recommendation** | üîß **Best For** |
|-----------------|------------------------|------------------|
| üåê WebAssembly Apps | ‚úÖ **TinyString** | Size-critical web deployment |
| üì± Embedded Systems | ‚úÖ **TinyString** | Resource-constrained devices |
| ‚òÅÔ∏è Edge Computing | ‚úÖ **TinyString** | Fast startup and deployment |
| üè¢ Memory-Intensive Server | ‚ö†Ô∏è **Standard Library** | High-throughput applications |
| üîÑ High-Frequency Processing | ‚ö†Ô∏è **Standard Library** | Performance-critical workloads |

#### üìä **Performance Legend**
- üèÜ **Excellent** (Better performance)
- ‚úÖ **Good** (Acceptable trade-off)
- ‚ö†Ô∏è **Caution** (Higher resource usage)
- ‚ùå **Poor** (Significant overhead)


## Contributing

This project is currently being **self-financed** and developed independently. The development, testing, maintenance, and improvements are funded entirely out of my personal resources and time.

If you find this project useful and would like to support its continued development, you can make a donation [here with PayPal](https://paypal.me/cdvelop?country.x=CL&locale.x=es_XC). Your support helps cover:

- üíª Development time and effort
- üß™ Testing and quality assurance
- üìö Documentation improvements
- üîß Bug fixes and feature enhancements
- üåê Community support and maintenance

Any contribution, however small, is greatly appreciated and directly impacts the project's future development. üôå

## License

MIT License
